<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[å°ç¨‹åºä¹‹navigateBack]]></title>
    <url>%2Fpost%2F2045f9c7.html</url>
    <content type="text"><![CDATA[å¦‚ä½•é€šè¿‡navigateBackç®¡ç†é¡µé¢æ ˆï¼ŸæŒ‡å“ªæ‰“å“ªæ‰æ˜¯navigateBackæ­£ç¡®ä½¿ç”¨å§¿åŠ¿navigateBackçš„ç”¨æ³•123wx.navigateBack({ delta: backSize // backsizeè¡¨ç¤ºå…³é—­å‡ é¡µï¼Œä»é¡µé¢æ ˆä¸­ç§»é™¤å‡ ä¸ª(åŒ…å«æœ¬é¡µé¢) })é¡¹ç›®ä¸­çš„éœ€æ±‚ã€Œ éœ€æ±‚ ã€ï¼šåšä¸€ä¸ªå…¬å…±ç»“æœé¡µï¼Œä»å…¶ä»–åœ°æ–¹è·³è½¬åˆ°è¿™ä¸ªé¡µé¢ï¼Œæœ€åç‚¹å‡»ã€Œå®ŒæˆæŒ‰é’®æˆ–è€…å³ä¸Šè§’è¿”å›ã€åï¼Œå›åˆ°æƒ³å›åˆ°çš„é¡µé¢ï¼Œå¹¶ä¸”æ§åˆ¶ç›®æ ‡é¡µé¢åˆ·æ–°è¿˜æ˜¯ä¸åˆ·æ–°ã€‚ã€Œ åˆ†æ ã€ï¼šæƒ³å®ç°å›åˆ°æƒ³å›åˆ°çš„é¡µé¢ï¼Œé€šè¿‡å¯¹é¡µé¢æ ˆçš„ç®¡ç†æ¥å®ç°ã€‚ã€Œ ä¸¾ä¾‹ ã€ï¼šé¡µé¢æ ˆä¸­æœ‰1-2-3-4-5ï¼Œ5æ˜¯å…¬ç”¨é¡µé¢ï¼Œç°åœ¨æƒ³è·³åˆ°1ï¼Œé‚£ä¹ˆå°±å¯ä»¥é€šè¿‡navigateBackçš„deltaå€¼ç­‰äº4æ¥æ§åˆ¶å›åˆ°1ï¼Œæˆ‘ä»¬å°±åŠ¨æ€æ”¹å˜deltaçš„å€¼å®ç°åŠ¨æ€è·³è½¬ï¼ŒnavigateBackä¼šè®©é¡µé¢å‡ºæ ˆï¼Œè¿™æ ·å°±å¾ˆå¥½åœ°ç»´æŠ¤äº†é¡µé¢æ ˆã€‚å…·ä½“æ€è·¯é€šè¿‡getCurrentPages( )èƒ½å¤Ÿæ‹¿åˆ°å½“å‰å°ç¨‹åºé¡µé¢æ ˆçš„æ•°ç»„ï¼Œæ•°ç»„ä¸­æœ‰ä¸ªkeyä¸ºrouteï¼Œè¯¥å€¼å³æ˜¯æ ˆé‡Œé¡µé¢åœ°å€ã€‚è¦è·³è½¬åˆ°1ï¼Œ4ä¼ å€¼ç»™5ï¼Œ5ä¸­é€šè¿‡éå†é¡µé¢æ ˆæ•°ç»„ï¼Œåˆ¤æ–­ä¼ è¿‡æ¥çš„å€¼æ˜¯å¦ç­‰äºé¡µé¢æ ˆä¸­çš„routeå€¼ï¼Œç›¸ç­‰çš„è¯ï¼Œè®°å½•indexï¼Œè¿™æ ·å³å¯å®Œæˆã€‚ä»£ç è¯´è¯è¿™æ˜¯é¡¹ç›®ä¸­ç”¨åˆ°çš„å…¬ç”¨é¡µé¢ï¼Œå°±æ˜¯é€šè¿‡navigateBackæ¥æ§åˆ¶è·³è½¬æ³¨é‡Šå†™å¾—å¾ˆæ¸…æ¥šäº†æƒ³è¦æ›´æ¸…æ™°åœ°äº†è§£é¡µé¢æ ˆæ˜¯æ€æ ·çš„ï¼Œå°±æ‰“æ–­ç‚¹çœ‹ä¸€çœ‹æœ‰é—®é¢˜æ¬¢è¿ç•™è¨€è®¨è®ºğŸ˜„123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114Page({ data: { isInvoke: false,// æ˜¯å¦è°ƒç”¨è¿‡æŒ‰é’® isUnload: true,// æ˜¯å¦æ˜¯å¸è½½çš„ç”Ÿå‘½å‘¨æœŸ resultImg: "", // å›¾æ ‡(é¡µé¢å†…ä½¿ç”¨) result: { title: "",// å¿…ä¼ (é¡µé¢æ ‡é¢˜) type: 1,// å¿…ä¼ (0:å¤±è´¥ 1:æˆåŠŸ) url: "", // å¿…ä¼ (è·³è½¬çš„url),ä¼ ç©ºæˆ–è€…ä¸åœ¨é¡µé¢æ ˆä¸­ï¼Œè·³è½¬åˆ°é¦–é¡µæˆ–æŒ‡å®šé¡µé¢ // é€‰ä¼ (ä¸Šé¢æ–‡æ¡ˆå¸ƒå±€ï¼ŒæˆåŠŸé»˜è®¤æ˜¯:æˆåŠŸ,å¤±è´¥é»˜è®¤:å¤±è´¥) resultUp: "", // é€‰ä¼ (ä¸‹é¢æ–‡æ¡ˆå¸ƒå±€ï¼Œä¸ä¼ é»˜è®¤æ˜¯ç©º resultDown: "", // é€‰ä¼ (æŒ‰é’®åç§°,æˆåŠŸé»˜è®¤:å®Œæˆ,å¤±è´¥é»˜è®¤:é‡è¯•) btnName: "", // é€‰ä¼ (æ˜¯å¦åˆ·æ–°ç›®æ ‡é¡µï¼Œé»˜è®¤åˆ·æ–°) isRefresh: true, } }, /** é¡µé¢åˆå§‹åŒ– */ onLoad: function (options) { }, onShow: function () { this.initData(); }, /** é¡µé¢å¸è½½*/ onUnload: function () { // å¦‚æœç‚¹å‡»äº†æŒ‰é’®ï¼Œå°±ä¸å†è°ƒç”¨å®ƒ if (!this.data.isInvoke) { this.data.isUnload = true this.targetJump() } }, /** åˆå§‹åŒ–å€¼ */ initData: function () { var result = wx.getStorageSync("result") if (result) { // é¡µé¢æ ‡é¢˜ wx.setNavigationBarTitle({ title: result.title }) var type = result.type this.data.result.url = result.url if (typeof (result.isRefresh) != "undefined") { this.data.result.isRefresh = result.isRefresh } if (type) { // æˆåŠŸ result.btnName = result.btnName ? result.btnName : "å®Œæˆ" this.data.resultImg = "/resources/success.png" result.resultUp = result.resultUp ? result.resultUp : "æˆåŠŸ" } else {// å¤±è´¥ result.btnName = result.btnName ? result.btnName : "é‡è¯•" this.data.resultImg = "/resources/failed.png" result.resultUp = result.resultUp ? result.resultUp : "å¤±è´¥" } var btnName = "result.btnName" var resultUp = "result.resultUp" var resultDown = "result.resultDown" this.setData({ resultImg: this.data.resultImg, [resultUp]: result.resultUp, [resultDown]: result.resultDown ? result.resultDown : "", [btnName]: result.btnName }) } }, /** æŒ‰é’®ç‚¹å‡»äº‹ä»¶ */ btnClick: function () { this.data.isInvoke = true this.data.isUnload = false this.targetJump(); }, /** ç›®æ ‡é¡µé¢è·³è½¬ */ targetJump: function () { // æ¸…é™¤ç¼“å­˜ wx.removeStorageSync("result") var pages = getCurrentPages() // å¦‚æœurlä¸ºç©ºæˆ–è€…ä¸åœ¨é¡µé¢æ ˆä¸­ï¼Œè¿”å›é¦–é¡µ var backSize = 100 var target console.log(pages) for (var i = 0ï¼›i &lt; pages.lengthï¼›i++) { if (this.data.result.url.substring(1) == pages[i].route) { // è‡ªèº«ä¹Ÿåœ¨æ ˆä¸­ï¼Œæ‰€ä»¥è¦-1 backSize = pages.length - i - 1; target = pages[i] console.log("target", target) break } } console.log("backSize", backSize) if (backSize == 100) {// é¦–é¡µæˆ–è€…æŒ‡å®šé¡µé¢ wx.reLaunch({ url: this.data.result.url, }) return } if (this.data.result.isRefresh) { // åˆ·æ–°ç›®æ ‡é¡µé¢ target.onLoad() } if (this.data.isUnload) {// ç”¨æˆ·ç‚¹å‡»äº†è¿”å›é”® // å¦‚æœç›®æ ‡é¡µé¢åœ¨é¡µé¢æ ˆä¸­å€’æ•°ç¬¬äºŒä¸ªä½ç½®ï¼Œè¿”å› if (backSize == 1) { return } // å¦‚æœåªæ˜¯è°ƒç”¨äº†å°ç¨‹åºè¿”å›é”®ï¼Œå› ä¸ºbacké”®é»˜è®¤ä¼šå…³æ‰ä¸€é¡µ backSize = backSize - 1 } wx.navigateBack({ delta: backSize }) }})ä»¥ä¸Š document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });]]></content>
      <categories>
        <category>å°ç¨‹åº</category>
      </categories>
      <tags>
        <tag>å°ç¨‹åº</tag>
        <tag>navigateBack</tag>
        <tag>é¡µé¢æ ˆ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¦‚ä½•é«˜æ•ˆè®°ç¬”è®°]]></title>
    <url>%2Fpost%2F9431294a.html</url>
    <content type="text"><![CDATA[ä¸ºä½•è®°ç¬”è®°ï¼Ÿä½ è®°çš„ç¬”è®°çœŸçš„æœ‰ç”¨å—ï¼Ÿç¬”è®°çš„ç§ç±»æŸ¥é˜…ç±»ä½œç”¨ï¼šä¿¡æ¯è®°å½•å¤ä¹ ç±»ä½œç”¨ï¼šå­¦ä¹ èµ„æ–™ç¬”è®°ç›®çš„æ ¹æ®ç¬”è®°ç§ç±»ç›®çš„åˆ†ä¸ºä¸¤ç§æŸ¥çœ‹ä¿¡æ¯ä¸éœ€è¦æ€è€ƒï¼Œåªéœ€æŸ¥åˆ°å³å¯å¤ä¹ è®°å½•çš„èµ„æ–™éœ€è¦æ€è€ƒï¼Œæ˜ç¡®å¤ä¹ è¿™ç¯‡ç¬”è®°çš„ç›®çš„ï¼Œå¸¦ç€é—®é¢˜å†å»å¤ä¹ ï¼Œè€Œä¸æ˜¯æ‰“å¼€ç¬”è®°å³æ˜¯å†…å®¹è¿™æ ·çš„å¤ä¹ æ•ˆç‡æ˜¯å¾ˆä½çš„ï¼Œè€Œä¸”ä¹Ÿä¸åˆ©äºè®°å¿†ç¬”è®°è®°å½•æ€è·¯ã€è½¯ä»¶å¤§çº²å®ç°ï¼šæ€ç»´å¯¼å›¾ã€Œ ç”¨æ¥é“¾æ¥æ€è·¯å’Œå…·ä½“ã€è½¯ä»¶ï¼šprocessOnæ€è·¯å®ç°ï¼šé€»è¾‘å›¾ã€æ—¶åºå›¾ã€ç”¬é“å›¾ã€Œ ç”¨æ¥æ¢³ç†é€»è¾‘ ã€è½¯ä»¶ï¼šprocessOnå…·ä½“å®ç°ï¼šmdæ–‡æœ¬ç¬”è®°ä½œç”¨ï¼šè®°å½•å…·ä½“çš„ç»†èŠ‚ç¬”è®°å¼€å¤´åº”æœ‰è¿™ç¯‡ç¬”è®°çš„ç›®å½•ï¼Œè¿™æ ·åšæœ‰ä¸¤ä¸ªå¥½å¤„ï¼šæŸ¥é˜…ç±»ç¬”è®°å¯è®©æŸ¥é˜…è€…ç›´æ¥è·³è½¬è‡³æ‰€éœ€ä¿¡æ¯å¤„å¤ä¹ ç±»ç¬”è®°å¯è®©å¤ä¹ è€…äº†è§£è¿™ç¯‡ç¬”è®°çš„å¤§çº²ï¼Œå¯å…ˆæ€è€ƒåå†æŸ¥çœ‹ç»†èŠ‚è½¯ä»¶ï¼štyporä»¥ä¸Š document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });]]></content>
      <categories>
        <category>æ•ˆç‡å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>é«˜æ•ˆ</tag>
        <tag>note</tag>
        <tag>è®°ç¬”è®°</tag>
      </tags>
  </entry>
</search>
